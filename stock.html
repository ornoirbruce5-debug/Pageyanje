<!DOCTYPE html>
<html lang="rw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Stock yose â€” Jeune Boutique</title>
  <link rel="stylesheet" href="css/style.css">
  <script>
    // ğŸŒ™ Dark mode toggle
    function toggleDark() {
      document.body.classList.toggle('dark');
      localStorage.setItem('jb_dark', document.body.classList.contains('dark'));
    }
    window.onload = () => {
      if (localStorage.getItem('jb_dark') === 'true') {
        document.body.classList.add('dark');
      }
    };
  </script>
</head>
<body>
  <!-- ğŸŒ™ Toggle -->
  <button onclick="toggleDark()" class="dark-toggle">ğŸŒ™/â˜€ï¸</button>

  <!-- ğŸ›’ Floating Cart -->
  <a href="cart.html" class="floating-cart">ğŸ›’</a>

  <!-- ğŸ” Header -->
  <header class="topbar">
    <div class="logo">Jeune Boutique âœ¨</div>
    <nav>
      <a href="index.html">ğŸ  Home</a>
    

  <!-- ğŸ§ƒ Main content -->
  <main class="section">
    <h1>ğŸ›ï¸ Stock yose</h1>

    <!-- ğŸ” Search -->
    <input id="searchBar" type="text" placeholder="ğŸ” Shakisha ibicuruzwaâ€¦" class="search-input" />

    <!-- ğŸ§ƒ Filters -->
    <div class="filters">
      <button data-cat="all" class="filter-btn active">Byose</button>
      <button data-cat="amata" class="filter-btn">Amata</button>
      <button data-cat="ibinyobwa" class="filter-btn">Ibinyobwa</button>
      <button data-cat="isuku" class="filter-btn">Isuku</button>
    </div>

    <!-- ğŸ“¦ Products -->
    <div id="productsGrid" class="products-grid"></div>

    <!-- ğŸ“„ Pagination -->
    <div id="pagination" class="pagination"></div>

    <!-- ğŸ“± WhatsApp QR -->
    <section class="whatsapp-section">
      <h2>ğŸ“ Twandikire kuri WhatsApp</h2>
      <img src="whatsapp-qr.jpg" alt="Scan QR to chat" class="qr-code">
      <p>
        Cyangwa <a href="https://wa.me/257XXXXXXXX?text=Mwaramutse%20Jeune%20Boutique%2C%20ndifuza%20kumenya%20ibicuruzwa%20mufite%20uyu%20munsi%20ğŸ˜Š" target="_blank">
          kanda hano kugira ngo utangire ikiganiro
        </a> ğŸ’¬
      </p>
    </section>
  </main>

  <!-- ğŸ‘£ Footer -->
  <footer class="footer">
    <p>&copy; 2025 Jeune Boutique â€” Made with ğŸ’– in Gihosha</p>
  </footer>

  <!-- âœ… Products tag -->
  <script src="js/products.js"></script>

  <!-- ğŸ§  Logic -->
  <script>
    const grid = document.getElementById('productsGrid');
    const searchBar = document.getElementById('searchBar');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const pag = document.getElementById('pagination');

    let currentPage = 1;
    const perPage = 12;
    let currentList = JB_PRODUCTS;

    function addToCart(id){
      const cart = JSON.parse(localStorage.getItem('jb_cart') || '[]');
      cart.push(id);
      localStorage.setItem('jb_cart', JSON.stringify(cart));
      alert('Yongewe mu gare ğŸ›’');
    }

    function renderProducts(list){
      grid.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement('article');
        card.className = 'product card';
        card.innerHTML = `
          <img src="${p.image}" alt="${p.name}" loading="lazy">
          <h3>${p.name}</h3>
          <p>${p.desc}</p>
          <div class="meta">
            <span class="price">${p.price} Fbu</span>
            <small>Stock: ${p.stock}</small>
          </div>
          <button class="button">Fata ğŸ›’</button>
        `;
        card.querySelector('button').addEventListener('click', ()=> addToCart(p.id));
        grid.appendChild(card);
      });
    }

    function renderPage(list, page){
      const start = (page-1)*perPage;
      const end = start+perPage;
      renderProducts(list.slice(start,end));
      renderPagination(list.length, page);
    }

    function renderPagination(total, page){
      const pages = Math.ceil(total/perPage);
      pag.innerHTML = '';
      for(let i=1;i<=pages;i++){
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.className = i===page ? 'active' : '';
        btn.addEventListener('click', ()=>{ currentPage=i; renderPage(currentList,i); });
        pag.appendChild(btn);
      }
    }

    searchBar.addEventListener('input', e => {
      const q = e.target.value.toLowerCase();
      currentList = JB_PRODUCTS.filter(p => p.name.toLowerCase().includes(q));
      currentPage = 1;
      renderPage(currentList, currentPage);
    });

    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const cat = btn.dataset.cat;
        currentList = cat === 'all' ? JB_PRODUCTS : JB_PRODUCTS.filter(p => p.category === cat);
        currentPage = 1;
        renderPage(currentList, currentPage);
      });
    });

    renderPage(currentList, currentPage);
  </script>
</body>
</html>
