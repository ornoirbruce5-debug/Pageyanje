<!DOCTYPE html>
<html lang="rw">
<head>
  <meta charset="UTF-8">
  <title>Jeune Boutique</title>
  <link rel="stylesheet" href="css/stock.css">
  <!-- Products & Cart logic -->
  <script src="js/products.js" defer></script>
  <script src="js/cart.js" defer></script>
  <script>
    // 🌙 Dark mode toggle
    function toggleDark() {
      document.body.classList.toggle('dark');
      localStorage.setItem('jb_dark', document.body.classList.contains('dark'));
    }
    window.onload = () => {
      if (localStorage.getItem('jb_dark') === 'true') {
        document.body.classList.add('dark');
      }
    };
  </script>
</head>
<body>
  <!-- 🌙 Toggle -->
  <button onclick="toggleDark()" class="dark-toggle">🌙/☀️</button>

  <!-- 🛒 Floating Cart -->
  <a href="cart.html" class="floating-cart">🛒</a>

  <!-- Hero -->
  <header class="hero">
    <h1>💖 Jeune Boutique</h1>
    <p>Ibikoresho bishya, byiza kandi by’umwimerere ✨</p>
  </header>

  <!-- Filters -->
  <section id="filters">
    <input type="text" id="search" placeholder="🔍 Shakisha ibicuruzwa (ex: glossy, weekend)">
    <select id="category-filter">
      <option value="all">All Categories</option>
      <option value="Dresses">Dresses</option>
      <option value="Shoes">Shoes</option>
      <option value="Accessories">Accessories</option>
      <option value="Tops">Tops</option>
      <option value="Beauty">Beauty</option>
      <option value="Hoodies">Hoodies</option>
    </select>
  </section>

  <!-- Catalogue -->
  <section id="catalogue">
    <h2>🛍️ Ibicuruzwa Byacu</h2>
    <div id="product-list" class="product-grid"></div>
  </section>

  <!-- WhatsApp -->
  <section class="whatsapp-section">
    <h2>📱 Twandikire kuri WhatsApp</h2>
    <img src="images/whatsapp-qr.jpg" alt="Scan QR to chat" class="qr-code">
    <p>
      Cyangwa <a href="https://wa.me/+25771633859?text=Mwaramutse%20Jeune%20Boutique%2C%20ndifuza%20kumva%20ibicuruzwa%20mufite%20uyu%20munsi%20😊" target="_blank">
        kanda hano kugira ngo utangire ikiganiro
      </a> 💬
    </p>
  </section>

  <!-- Testimonials -->
  <section class="testimonials">
    <h2>🌟 Ibitekerezo by’Abakiriya</h2>
    <div class="carousel" id="testimonial-carousel">
      <div class="testimonial active">
        <img src="images/profile1.jpg" alt="Aline" class="profile-pic">
        <p>“Jeune Boutique yampaye ikanzu nziza cyane 👗, ndumva nishimye cyane!”</p>
        <div class="stars">⭐⭐⭐⭐⭐</div>
        <span>- Aline, 21</span>
      </div>
      <div class="testimonial">
        <img src="images/profile2.jpg" alt="Cynthia" class="profile-pic">
        <p>“Sneakers zanyu ni fresh 🔥, ndazambara buri munsi.”</p>
        <div class="stars">⭐⭐⭐⭐</div>
        <span>- Cynthia, 19</span>
      </div>
      <div class="testimonial">
        <img src="images/profile3.jpg" alt="Vanessa" class="profile-pic">
        <p>“Service yanyu iraryoshye 💖, WhatsApp support irihuta cyane.”</p>
        <div class="stars">⭐⭐⭐⭐⭐</div>
        <span>- Vanessa, 23</span>
      </div>
    </div>
    <div class="carousel-controls">
      <button onclick="prevTestimonial()">⬅️</button>
      <button onclick="nextTestimonial()">➡️</button>
    </div>
  </section>

  <!-- Floating emojis + Toasts -->
  <div class="floating-emojis" id="floating-emojis"></div>
  <div class="toast-stack" id="toast-stack"></div>

  <!-- Footer -->
  <footer>
    <p>© 2025 Jeune Boutique 💖</p>
  </footer>

  <!-- Catalogue rendering logic -->
  <script>
    function renderProducts(filterText = "", category = "all") {
      const list = document.getElementById("product-list");
      list.innerHTML = "";

      const search = filterText.toLowerCase();

      window.products
        .filter(p => {
          const inCategory = category === "all" || p.category === category;
          const inTags = p.tags.some(tag => tag.toLowerCase().includes(search));
          const inName = p.name.toLowerCase().includes(search);
          return inCategory && (search === "" || inTags || inName);
        })
        .forEach(product => {
          const card = document.createElement("div");
          card.className = "product-card";
          card.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p>${product.description}</p>
            <p><strong>${product.price} Fbu</strong></p>
            <p>Stock: ${product.stock > 0 ? product.stock : "Sold Out 🚫"}</p>
            <button onclick="addToCart('${product.id}')" ${product.stock === 0 ? "disabled" : ""}>
              🛒 Add to Cart
            </button>
          `;
          list.appendChild(card);
        });
    }

    // Filters setup
    window.addEventListener("DOMContentLoaded", () => {
      renderProducts();

      document.getElementById("search").addEventListener("input", e => {
        renderProducts(e.target.value, document.getElementById("category-filter").value);
      });

      document.getElementById("category-filter").addEventListener("change", e => {
        renderProducts(document.getElementById("search").value, e.target.value);
      });
    });

    // Testimonials carousel
    let currentTestimonial = 0;
    function showTestimonial(index) {
      const testimonials = document.querySelectorAll("#testimonial-carousel .testimonial");
      testimonials.forEach((t, i) => {
        t.classList.toggle("active", i === index);
      });
    }
    function nextTestimonial() {
      const testimonials = document.querySelectorAll("#testimonial-carousel .testimonial");
      currentTestimonial = (currentTestimonial + 1) % testimonials.length;
      showTestimonial(currentTestimonial);
    }
    function prevTestimonial() {
      const testimonials = document.querySelectorAll("#testimonial-carousel .testimonial");
      currentTestimonial = (currentTestimonial - 1 + testimonials.length) % testimonials.length;
      showTestimonial(currentTestimonial);
    }
    setInterval(nextTestimonial, 5000);
  </script>
</body>
</html>
